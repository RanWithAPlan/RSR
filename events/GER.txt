add_namespace = socgermany

country_event = {
    id = socgermany.1
    title = socgermany.1.t
    desc = socgermany.1.d
    
    is_triggered_only = yes
    
    option = {
        name = socgermany.1.a
    }
}
country_event = {
    id = socgermany.2
    title = socgermany.2.t
    desc = socgermany.2.d
    
    is_triggered_only = yes
    
    option = {
        name = socgermany.2.a
    }
}
country_event = {
    id = socgermany.3
    title = socgermany.3.t
    desc = socgermany.3.d
    
    is_triggered_only = yes
    
    option = {
        name = socgermany.3.a
    }
}
country_event = {
    id = socgermany.4
    title = socgermany.4.t
    desc = socgermany.4.d
    
    is_triggered_only = yes
    
    option = {
        name = socgermany.4.a
    }
}
country_event = {
    id = socgermany.5
    title = socgermany.5.t
    
    is_triggered_only = yes
    
    option = {
        name = socgermany.5.a
        ai_chance = {
            base = 20
        }
        set_politics = { ruling_party = anarchism}
        add_popularity = {
	        ideology = anarchism
	        popularity = 0.20
        }
        set_country_flag = GER_anarchisten_election
        complete_national_focus = GER_anarchisten_victory 
        country_event = {
            id = socgermany_council.1
        }
    }
    option = {
        name = socgermany.5.b
        ai_chance = {
            base = 25
        }
        set_politics = { ruling_party = council_communism }
        add_popularity = {
	        ideology = council_communism
	        popularity = 0.10
        }
        set_country_flag = GER_dezentralisten_election 
        complete_national_focus = GER_dezentralisten_victory
        country_event = {
            id = socgermany_council.1
        }
    }
    option = {
        name = socgermany.5.c
        ai_chance = {
            base = 15
        }
        set_politics = { ruling_party = radical_socialism }
        add_popularity = {
	        ideology = radical_socialism
	        popularity = 0.20
        }
        set_country_flag = GER_zentralisten_election 
        complete_national_focus = GER_zentralisten_victory
        country_event = {
            id = socgermany_council.1
        }
    }
}

add_namespace = socgermany_council
country_event = {
    id = socgermany_council.1
    hidden = yes
    
    is_triggered_only = yes
    
    option = {
        name = socgermany_council.1.a
        set_variable = { var = GER_anarchisten_seats value = party_popularity@anarchism }
        set_variable = { var = GER_dezentralisten_seats value = party_popularity@council_communism }
        set_variable = { var = GER_zentralisten_seats value = party_popularity@radical_socialism }
        multiply_variable = { var = GER_anarchisten_seats value = 100 }
        multiply_variable = { var = GER_dezentralisten_seats value = 100 }
        multiply_variable = { var = GER_zentralisten_seats value = 100 }
        round_variable = GER_anarchisten_seats
        round_variable = GER_dezentralisten_seats
        round_variable = GER_zentralisten_seats
        set_variable = { var = GER_total_seats_100 value = 100 }
        set_variable = { var = GER_total_seats value = GER_anarchisten_seats }
        add_to_variable = { var = GER_total_seats value = GER_dezentralisten_seats }
        add_to_variable = { var = GER_total_seats value = GER_zentralisten_seats }
        subtract_from_variable = { var = GER_total_seats_100 value = GER_total_seats }
        if = {
            limit = {
                has_country_flag = GER_anarchisten_election
            }   
            add_to_variable = {
                var = GER_anarchisten_seats value = GER_total_seats_100
            }
        }
        else_if = {
            limit = {
                has_country_flag = GER_dezentralisten_election
            }   
            add_to_variable = {
                var = GER_dezentralisten_seats value = GER_total_seats_100
            }
        }
        else_if = {
            limit = {
                has_country_flag = GER_zentralisten_election
            }   
            add_to_variable = {
                var = GER_zentralisten_seats value = GER_total_seats_100
            }
        }
        clear_variable = GER_total_seats_100
        clear_variable = GER_total_seats
        set_country_flag = GER_executive_council_on
        set_variable = { var = GER_seats_change value = -6 }
    }
}
